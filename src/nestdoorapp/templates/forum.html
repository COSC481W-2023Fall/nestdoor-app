{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="{% static '/css/homepage.css' %}" />
    </head>
    <style>
        .flex-container {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
        }
        .flex-box {
            border: 1px solid black;
            width: 200px;
            height: 100px;
            margin: 20px;
            text-align: center;
            font-size: 40px;
            overflow: auto;
        }
    </style>
    {{total|json_script:"json-total"}}
    <script>
        function loadMorePosts(){
            const content_container = document.getElementById("content");
            alert("load more posts")
            $.ajax({
                url: '',
                type: 'GET',
                data: {
                    'post_title': post.title,
                    'post_author': post.author,
                },
                success: function (response) {
                    const data = response.posts;
                    data.map(post => {
                        content_container.innerHTML += '<div class="flex-box"><a href="">${post.title}</a>${post.author}</div>'
                    })
                },
                error: function (err) {
                    console.log(err);
                },
            })
        }
    </script>
    <body>
        <div id="page-container">
            <div id="content-wrap">

                <div class="topnav">
                    <a href="/homepage"><img src={% static '/images/reed_logo_mini.png' %} alt="Nestdoor App Logo Small" style="width:30px;height:30px;" class="center" ></a>
                    <a class="active" href="">Home</a>
                    {% if user.is_authenticated %}
                    <a href="/logout">Logout</a>
                    {% else %}
                    <a href="/login">Login</a>
                    {% endif %}
                    <a class="active"  href="">Forum</a>
                    <a href="/about">About</a>
                </div>
                
                <h1>Welcome to the Temporary Forum Page!</h1>
                {% if user.is_authenticated %}
                    <span> Welcome! Logged in as {{user.username}}</span>
                    <div style="color: black; padding-left: 10px;">
                    <form method="post">
                    {% csrf_token %}
                    {% for field in post_form %}
                                {{field.label_tag}}
                                <br>
                                {{field}}
                                <br>
                    {% endfor %}

                    {% if login_form.non_field_errors %}
                                <div style="color:red;">
                                    <p>
                                        {{post_form.non_field_errors}}
                                    </p>
                                </div>
                    {% endif %}
                        <br>
                            <button type="submit" class="btn btn-success">Create Post</button>
                </form>
                </div>
                {% endif %}

                <div class="h_line"></div>
                <div class="flex-container" id="content">
                    <!-- {% for post in posts %} -->
                    <div class="flex-box">
                    <a href="">{{post.title}}</a>{{post.author}}  
                    </div>
                    <!-- {% endfor %} -->
                </div>

                <form method="get">
                <div style="text-align:center;" name="loadmorebutton" id="loadpostsbutton">
                    <button type="load" class="btn btn-success" onclick="loadMorePosts()">Load More Posts</button>
                </div>
                </form>
                <div class="h_line"></div>
                <h1 class="split-para"><a href="/login">Login</a> <br/> <a href="/logout">Logout</a> <span><a href="/forum">Newest Posts!</a></span></h1>
                <!--
                <div class="vl">
                    <a href="/forum"><h1>Newest Posts!</h1></a>
                </div>
                -->
                <div class="h_line"></div>
                
            </div>
            <div class="footer">
                <p class="footer-text-left">
                    TEAM EAGLES
                </p>
                <p class="footer-text-right">
                    COSC 481
                </p>
                <div class="footer-content-center">
                    <a href="/homepage"><img src={% static '/images/reed_logo2.png' %} class="icon-style" alt="Nestdoor App Logo Small"></a>
                </div>
            </div>
        </div>
    </body>
</html>